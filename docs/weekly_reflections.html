<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Weekly Reflections – ESS 411 Portfolio</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">ESS 411 Portfolio</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./slides.html"> 
<span class="menu-text">Lecture Slides</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./readings.html"> 
<span class="menu-text">Readings</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./assignments.html"> 
<span class="menu-text">Assignments</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./weekly_reflections.html" aria-current="page"> 
<span class="menu-text">Weekly Reflections</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Weekly Reflections</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="reflection-1" class="level4">
<h4 class="anchored" data-anchor-id="reflection-1">Reflection 1</h4>
<p>While I’m unsure of what I’d like to do career wise, for the past couple of years I’ve explored different roles within ecosystem science to figure out what I like to do (so far forestry and a lab research position). I chose ESS because I knew that I liked science and have always been passionate about the environment, largely because I grew up exploring the great outdoors here in Colorado. As for content in class this week, I’d love to revisit the redfield ratio and talk about that a bit more in depth. I’ve learned about it in past ecology courses, but I think stoichiometric ratios are fundamental to ecology and would like to talk about this further.</p>
</section>
<section id="reflection-2" class="level4">
<h4 class="anchored" data-anchor-id="reflection-2">Reflection 2</h4>
<p>This week we covered topics including stoichiometry and modeling change in time of species’ biomass using the house cat and grain scenario. We discussed assimilation and production efficiency, death rate, consumption (of grain by mice), predator feeding rate, etc. We also briefly talked about nutrient ratios and different types of photosynthesis. These are all concepts that I’ve been introduced to in former classes (intro ecology and ecosystem ecology), and although I feel like I have some grasp on how these mechanisms work and interact, hearing about them again after not having taken an ecology course in a while has shown me which concepts are easiest to recall (assimilation and production efficiency, death rates, etc.) and which are much harder for me to recall (stoichiometry, nutrient ratios, nutrient cycling). This helps me understand which concepts I need to review the most.&nbsp;</p>
</section>
<section id="reflection-3" class="level4">
<h4 class="anchored" data-anchor-id="reflection-3">Reflection 3</h4>
<p>This week we discussed topics including the layers and composition of Earth’s atmosphere, mean residence time, tropospheric &amp; stratospheric ozone, CFCs &amp; ozone, and UV-B impacts. I have discussed all of these topics in previous classes, but mean residence time is something that I am less familiar with and was a bit confused about. It seemed like Dr.&nbsp;Moore was saying that although the mean residence time of CO2 in the atmosphere is 5 yrs, it will take hundreds of years for that carbon to “cycle through” since inputs to the atmosphere from human release of CO2 have been so much greater than outputs from the atmosphere to carbon-fixing organisms. However, Dr.&nbsp;Moore brought up something about how the supply of CO2 is greater and therefore we would have more CO2 fixing organisms or something like that and that threw me off a bit. What is the implication of this?</p>
</section>
<section id="reflection-4" class="level4">
<h4 class="anchored" data-anchor-id="reflection-4">Reflection 4</h4>
<p>This week we focused on soil, including biological activity in soil, soil formation, weathering, etc. I’ve learned about soil a few times in different ecology/biology classes, but this is the first time that eluviation vs.&nbsp;illuviation has been explained to me in a way that I understand. I think soil health is often overlooked in its environmental importance, and I think that was made clear in class this week as we see that plants, our primary producers, depend on healthy soil. I also really enjoyed talking about cation-exchange capacity, as this is another concept that I’ve been introduced to but have never really understood. While I knew that it was a measure of soil fertility, I didn’t understand the context. This week, I learned that root hairs can absorb cations through diffusion, and I guess I just never realized that cations are nutrients like Ca, K, and Mg until this week.&nbsp;</p>
</section>
<section id="reflection-5" class="level4">
<h4 class="anchored" data-anchor-id="reflection-5">Reflection 5</h4>
<p>This week we discussed soil taxonomy, and the different classifications of soil based on traits like maturity, climate, parent material, etc. We also talked a bit about translocation and the different types of translocation that can occur in soil (ex. podzolization). We took our first exam this week and one thing that I noticed was that although I did not study much, I was able to draw on both what I’ve learned in this class as well as other classes to answer questions on the exam. Although I would’ve liked to have been able to go into more detail for some questions (the value of studying I suppose!), it was really encouraging to see that I really have learned a good amount about ecosystem science over the past couple years that I’ve been at CSU. Of course, there is still much for me to learn, but I often feel a sense of imposter syndrome…that is, I’ve made it far in school and done well, but I always question whether I truly know anything within this field or if I’ve just made it this far through brief memorization. This class (at least so far) almost feels like a culmination of things that I’ve learned throughout my ESS classes. While I’ve encountered almost every concept that we’ve discussed in this class in previous classes, I feel like this class is solidifying information that I only somewhat understand and showing me that I know more than I think I do. I hope I’m not saying all this in haste haha, hopefully I did well on the test.&nbsp;</p>
</section>
<section id="reflection-6" class="level4">
<h4 class="anchored" data-anchor-id="reflection-6">Reflection 6</h4>
<p>This week we talked about several key concepts including: 1) RuBisCo, the most abundant enzyme, integral to the Calvin cycle. RuBisCo is not very efficient, but makes up for this in abundance. Tied to this is the concept of photorespiration. Both oxygen and CO2 can bind to RuBisCo, and when oxygen binds, the products are not useful to the plant for primary production. 2) Water use and nutrient use efficiency, which are measures that compare H2O and key nutrients like N to net photosynthesis. 3) NPP and NEP and how these are measured (leaf biomass, eddy co-variance flux, NDVI). 4) Soil fauna interactions, including rizosphere mutualisms, rizosphere trophic interactions, and litter layer interactions, all of which occur mostly in the O and A layers, sometimes all the way to the B layer depending on plant root depth.</p>
</section>
<section id="reflection-7" class="level4">
<h4 class="anchored" data-anchor-id="reflection-7">Reflection 7</h4>
<p>N/A</p>
</section>
<section id="reflection-8" class="level4">
<h4 class="anchored" data-anchor-id="reflection-8">Reflection 8</h4>
<p>This week we talked about succession and ecosystem development, and how traits differ between early and mature development stages. We also talked about mycorrhizal relationships and the role of enzymes in decomposition and soil carbon. Lastly, we started to talk about wetlands, and their importance for soil carbon storage. We were able to draw on concepts we’ve discussed in the past like mean residence time to understand wetland functions and attributes.</p>
</section>
<section id="reflection-9" class="level4">
<h4 class="anchored" data-anchor-id="reflection-9">Reflection 9</h4>
<p>This week we discussed biogeochemistry of wetlands, streams, and lakes. We talked about differences between aquatic and terrestrial ecosystems, and how aquatic ecosystems depend on the slow leakage of nutrients from terrestrial ecosystems (most nutrients are allocthonous). We talked about food web concepts including connectance, stability, and how changing diversity affects these measures. We also discussed properties of water and chemistry of common ions in water, anthropogenic effects on ions in water (ex. acid rain and sulfate ion), and stratification of lakes. We saw how stratified lakes have distinct layers where different processes occur (production in the epilimnion and decomposition in the hypolimnion), but connected how although these processes are spatially separated, they exhibit similar patterns to stream biogeochemistry.</p>
</section>
<section id="reflection-10" class="level4">
<h4 class="anchored" data-anchor-id="reflection-10">Reflection 10</h4>
<p>This week we compared trophic statuses of lakes (oligotrophic vs eutrophic) and discussed how human inputs can speed up a lakes’ progression to a eutrophic state. We also talked about the paradox of enrichment, which asserts that simply adding nutrients to a system does not allow for unlimited growth as biogeochemical checks start to kick in. We reviewed the effects of different environmental variables on annual primary productivity in lakes, which related to concepts from ESS210 (physical geography). We also talked about estuaries and their biogeochemical processes including cation exchanges and flocculation.</p>
</section>
<section id="reflection-11" class="level4">
<h4 class="anchored" data-anchor-id="reflection-11">Reflection 11</h4>
<p>I think after our review session the thing that stood out to me most was Odum’s framework. The table we looked at gave a breakdown of different attributes of an ecosystem (ex. rate of nutrient exchange between organisms and the environment) and how they compare between undeveloped and mature ecosystems. This table could be used to connect to pretty much any of the concepts we talked about over the past few weeks. I found myself referencing it a lot when thinking about things like connectance and species richness and their relationship, nutrient cycling and storage, etc.</p>
</section>
<section id="reflection-12" class="level4">
<h4 class="anchored" data-anchor-id="reflection-12">Reflection 12</h4>
<p>This week we talked about oceans and their circulation patterns, nutrient cycling, and decomposition of materials. We discussed how cold water slows the rate of decomposition, so a greater proportion of the products of primary productivity go to herbivores than decomposers compared to warmer surface waters. We discussed thermohaline circulation and the relationship between salt, temperature, and density, and how those all influence ocean circulation. We compared ocean nutrient cycling to lake/terrestrial cycling and noticed that the processes are the same, they’re just on a much larger scale with higher MRTs in the ocean.&nbsp;</p>
</section>
<section id="reflection-13" class="level4">
<h4 class="anchored" data-anchor-id="reflection-13">Reflection 13</h4>
<p>This week we continued our discussion on oceans, focusing on sea level rise, acidification, and the global hydrological cycle. We also talked about the cryosphere, glacial ice, and the Pleistocene Epoch (most recent ice age). We shifted gears to discuss the global carbon cycle and looked at how human activity (burning of fossil fuels, change in land use and land cover) are shifting fluxes in the carbon cycle. The model that we looked at showed how human activity is disrupting this cycle, and we observed that without human activity, the active carbon cycle seems to remain in equilibrium. We compared human activity fluxes to the burial rate (10 vs 0.1) and talked about how this relates to MRT. Even if we got rid of the human activity flux, it would take centuries to return to steady-state because the rate at which we’ve been releasing carbon to the atmosphere is so much higher than the burial rate. Our discussion on MRT also related to the paradox of enrichment. We talked about the worldview that adding more carbon to the atmosphere is like adding fertilizer since primary producers use CO2, however, at some point systems will reach a tipping point, becoming unstable and chaotic. Systems are complex, and by increasing availability to an energy source, we may see increases in productivity initially, however there are many other factors at play in ecosystem dynamics (the cat and mouse example helps us understand this, as increased mice population also means faster spread of disease).&nbsp;</p>
</section>
<section id="reflection-14" class="level4">
<h4 class="anchored" data-anchor-id="reflection-14">Reflection 14</h4>
<p>This week we finished our discussion on the Arctic case study we looked at last week, examined the nitrogen cycle, and then began talking about the phosphorus cycle. One new thing that I learned this week was that phosphorous is quite abundant, but usable forms are hard to come by, especially in aquatic ecosystems. I noticed overlap between this class and NR400 this week. In this class, we talked about anthropogenic contributions to reactive N in the environment, and in NR400 we read an address from Cesar Chavez about grape vineyards and the connection between nitrate containing fertilizers leaching into waterways and sickness in nearby areas.</p>
</section>
<section id="reflection-15" class="level4">
<h4 class="anchored" data-anchor-id="reflection-15">Reflection 15</h4>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>